!function e(t,n,r){function a(i,l){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!l&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[i]={exports:{}};t[i][0].call(s.exports,(function(e){return a(t[i][1][e]||e)}),s,s.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){"use strict";var r;function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i,l,u,c,s,d,f,v,m,p=320,h=new Audio("./audio/click.mp3"),y=null===(r=JSON.parse(localStorage.getItem("isAudio")))||void 0===r||r,g={top:0,left:0,value:0},M=[];function b(e,t,n){var r=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);return!(1!==r&&1!==a||e.x!==t.x&&e.y!==t.y)}function L(e){var t=function(e,t){for(var n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)if(t[n][r]===e)return{y:n,x:r};return null}(0,e),n=function(e,t){for(var n=[],r=0;r<t.length;r++)for(var a=0;a<t[r].length;a++){var o={y:r,x:a};b(o,e)&&n.push(o)}return n}(t,e);return function(e,t,n){var r=n[e.x][e.y];n[e.x][e.y]=n[t.y][t.x],n[t.y][t.x]=r}(n[Math.floor(Math.random()*n.length)],t,e),e}function x(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.createElement("div");t.className="btns";var n=document.createElement("button");n.className="btn",n.innerHTML="Start",n.addEventListener("click",E);var r=document.createElement("button");r.className="btn",r.innerHTML="Save",r.disabled=!e,r.addEventListener("click",T);var a=document.createElement("button");a.className="btn",a.innerHTML="Load",a.addEventListener("click",S);var o=document.createElement("button");o.className="btn",o.innerHTML="Results",o.addEventListener("click",_);var i=document.createElement("label"),l=document.createElement("input"),u=document.createElement("span");return u.innerHTML="Sound",l.type="checkbox",l.checked=y,i.append(l,u),l.addEventListener("change",q),t.append(n,r,a,o,i),t}function E(e){d=0,f=0,J()}function S(e){var t,n,r,a=JSON.parse(localStorage.getItem("game"));if(a){u=null!==(t=null==a?void 0:a.cellsCount)&&void 0!==t?t:16,d=null!==(n=null==a?void 0:a.moves)&&void 0!==n?n:0,f=null!==(r=null==a?void 0:a.seconds)&&void 0!==r?r:0,g=a.cells.find((function(e){return 0===e.value}));var o=a.cells;M=[],J(o)}}function T(e){var t={};t.moves=document.querySelector(".stats__moves span").innerHTML,t.seconds=f,t.cellsCount=Math.pow(document.querySelector(".difficulty__current span").innerHTML.split("x")[0],2),t.cells=M;var n=t.cells.findIndex((function(e){return 0===e.value}));t.cells.splice(n,1,g),localStorage.setItem("game",JSON.stringify(t))}function _(e){v||confirm("Save the game?")&&T();N(),document.body.innerHTML="";var t=x(!1);document.body.append(t);var n=function(){var e=document.createElement("table"),t=JSON.parse(localStorage.getItem("results"));return e.innerHTML="\n    <tr>\n      <th>Position</th>\n      <th>Moves</th>\n      <th>Time</th>\n    </tr>\n\n    ".concat(t?t.map((function(e,t){return"\n        <tr>\n          <td>".concat(t+1,"</td>\n          <td>").concat(e.moves,"</td>\n          <td>").concat(e.time,"</td>\n        </tr>\n      ")})).join(" "):'\n        <tr>\n          <td colspan="3">\n            <p class="results-placeholder">You have never won</p>\n          </td>\n        </tr>\n      ',"\n  "),e}();document.body.append(n)}function q(e){y=e.target.checked,localStorage.setItem("isAudio",y)}function H(){var e,t,n=document.createElement("div");if(n.className="stats",f){var r=Math.floor(f/60/60%24),a=Math.floor(f/60%60);e=(r?r+":":"")+(a?a+":":"0:")+f%60}return n.innerHTML='\n    <div class="stats__moves">\n      Moves: <span>'.concat(d||0,'</span>\n    </div>\n\n    <div class="stats__time">\n      Time: <span>').concat(f?e:"0:0","</span>\n    </div>\n  "),f=null!=(t=f)?t:0,s=setInterval((function(){var e=document.querySelector(".stats__time span");f++;var t=Math.floor(f/60/60%24),n=Math.floor(f/60%60);e.innerHTML=(t?t+":":"")+(n?n+":":"0:")+f%60}),1e3),n}function N(){clearInterval(s),s=null}function w(e){var t=M[m],n=t.left*l,r=t.top*l,a=e.pageX-i.left,o=e.pageY-i.top,u=a>=n&&a<=n+l&&o>=r&&o<=r+l,c=A(e),s=c.xCondition,d=c.yCondition;(s&&d||u)&&e.preventDefault()}function C(e,t,n,r){var a=document.createElement("div");return a.className="cell",a.draggable=!0,a.style.width=n+"px",a.style.height=n+"px",a.style.left=r.left*n+"px",a.style.top=r.top*n+"px",M.push({left:r.left,top:r.top,value:t,elem:a}),a.innerHTML=t,a.addEventListener("click",(function(t){return function(e,t){if(I(M[t]))return;k(t)}(0,e)})),a.addEventListener("touchmove",(function(t){return function(e,t){if(e.preventDefault(),I(M[t]))return e.preventDefault();var n=A(e.targetTouches[0]),r=n.xCondition,a=n.yCondition;r&&a&&k(t)}(t,e)})),a.addEventListener("dragstart",(function(t){return function(e,t){m=t;var n=M[t];if(I(n))return e.preventDefault();"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||requestAnimationFrame((function(){return n.elem.style.visibility="hidden"}),0)}(t,e)})),a.addEventListener("dragend",(function(t){return function(e,t){var n=M[t],r=A(e),a=r.xCondition,o=r.yCondition;a&&o&&k(t,!0);requestAnimationFrame((function(){return n.elem.style.visibility="visible"}),0)}(t,e)})),a}function A(e){var t=g.left*l,n=g.top*l,r=e.pageX-i.left,a=e.pageY-i.top;return{xCondition:r>=t&&r<=t+l,yCondition:a>=n&&a<=n+l}}function I(e){return Math.abs(g.left-e.left)+Math.abs(g.top-e.top)>1}function O(e){e.preventDefault(),u=Math.pow(e.target.innerHTML.split("x")[0],2),d=0,f=0,l=p/Math.sqrt(u),J()}function k(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=M[e];document.querySelector(".stats__moves span").innerHTML++,h.currentTime=0,y&&h.play(),n.elem.style.transition=t?"all 0s":"all 0.3s linear",n.elem.style.left=g.left*l+"px",n.elem.style.top=g.top*l+"px";var r=n.left,a=n.top;n.left=g.left,n.top=g.top,g.left=r,g.top=a;var o=M.every((function(e){return v=!0,e===g||(0===g.top&&0===g.left?e.value===e.top*Math.sqrt(u)+e.left:e.value===e.top*Math.sqrt(u)+e.left+1)}));if(o){N();var i=document.querySelector(".stats__moves span").innerHTML,c=document.querySelector(".stats__time span").innerHTML;document.querySelector(".field").innerHTML="Hooray! You solved the puzzle in ".concat(c," and ").concat(i," moves!"),D(i,c)}}function D(e,t){var n,r=null!==(n=JSON.parse(localStorage.getItem("results")))&&void 0!==n?n:[];r.push({moves:e,time:t}),localStorage.setItem("results",JSON.stringify(r.sort((function(e,t){return e.moves-t.moves}))))}function J(e){v=!1,e||(g={top:0,left:0,value:0}),M=[],u||(u=16),c=function(e){var t=a(new Array(e-1).keys()).map((function(e){return e+1}));Math.random()>.5?t.push(0):t.unshift(0),t=function(e,t){var n,r,a=[];for(n=0,r=-1;n<e.length;n++)n%t==0&&(a[++r]=[]),a[r].push(e[n]);return a}(t,Math.sqrt(e));for(var n=0;n<10*e;n++)t=L(t);return t.flat()}(u),document.body.innerHTML="",N();var t=x();document.body.append(t);var n=H();document.body.append(n);var r=function(e){l=p/Math.sqrt(u);var t=document.createElement("div");t.className="field",t.style.width="320px",t.style.height="320px";for(var n=0;n<u;n++)if(e&&e[n]){if(0===e[n].value)continue;var r=C(n,e[n].value,l,e[n]);t.append(r)}else{var a={left:n%Math.sqrt(u),top:(n-n%Math.sqrt(u))/Math.sqrt(u)},o=c[n];if(0===o){g={left:a.left,top:a.top,value:o},M.push(g);continue}var i=C(n,o,l,a);t.append(i)}return t.addEventListener("dragover",w),t}(e);document.body.append(r),i={left:r.getBoundingClientRect().left,top:r.getBoundingClientRect().top};var o=function(e){e=e?Math.sqrt(e)+"x"+Math.sqrt(e):"4x4";var t=document.createElement("div");t.className="difficulty";var n=document.createElement("div");n.className="difficulty__current",n.innerHTML="Frame size: <span>".concat(e,"</span>"),t.append(n);var r=document.createElement("ul");r.className="difficulty__list";for(var a=3;a<9;a++){var o=document.createElement("li");o.className="difficulty__item";var i=document.createElement("a");i.href="#",i.className="difficulty__link",i.innerHTML=a+"x"+a,i.addEventListener("click",O),o.append(i),r.append(o)}var l=document.createElement("div");return l.className="difficulty__other",l.innerHTML="Other sizes: ",l.append(r),t.append(l),t}(u);document.body.append(o)}M.push(g),document.addEventListener("DOMContentLoaded",(function(){J()}))},{}]},{},[1]);
//# sourceMappingURL=maps/main.min.js.map
