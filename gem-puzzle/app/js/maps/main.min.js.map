{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/js/main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","cellSize","numbers","interval","CLICK_AUDIO","Audio","isAudio","emptyCell","top","left","value","cells","handleAudioToggle","target","classList","toggle","createStatsBar","statsBar","document","createElement","className","innerHTML","seconds","setInterval","time","querySelector","concat","Math","floor","startInterval","createCell","index","cellWSize","position","cellsCount","cell","style","width","height","push","elem","addEventListener","leftDiff","abs","topDiff","play","currentLeft","currentTop","isFinished","every","sqrt","moves","prevResults","localStorage","getItem","results","JSON","parse","setItem","stringify","sort","b","saveResults","moveCell","handleSizeChange","preventDefault","startGame","pow","split","_toConsumableArray","Array","keys","map","x","random","unshift","body","clearInterval","btns","restartBtn","console","log","saveBtn","resultsBtn","toggleAudio","append","createBtns","field","FIELD_WIDTH","createField","diffuclity","size","difficulty","difficultyCurrent","difficultyList","difficultyItem","difficultyLink","href","difficultyOther","createDifficultyPanel","_localStorage$getItem"],"mappings":"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","file":"../main.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","const FIELD_WIDTH = 320;\nconst CLICK_AUDIO = new Audio('./audio/click.mp3');\n\nlet isAudio = true;\n\nlet emptyCell = {\n  top: 0,\n  left: 0,\n  value: 0\n};\n\nlet cells = [];\ncells.push(emptyCell);\n\nlet cellSize;\nlet numbers;\nlet interval;\n\nfunction createBtns() {\n  const btns = document.createElement('div');\n  btns.className = 'btns';\n\n  const restartBtn = document.createElement('button');\n  restartBtn.className = 'btn';\n  restartBtn.innerHTML = 'Restart';\n  restartBtn.addEventListener('click', (e) => { console.log(e.target.innerHTML) });\n\n  const saveBtn = document.createElement('button');\n  saveBtn.className = 'btn';\n  saveBtn.innerHTML = 'Save';\n  saveBtn.addEventListener('click', (e) => { console.log(e.target.innerHTML) });\n\n  const resultsBtn = document.createElement('button');\n  resultsBtn.className = 'btn';\n  resultsBtn.innerHTML = 'Results';\n  resultsBtn.addEventListener('click', (e) => { console.log(e.target.innerHTML) });\n\n  const toggleAudio = document.createElement('button');\n  toggleAudio.className = 'btn active';\n  toggleAudio.innerHTML = 'Sound';\n  toggleAudio.addEventListener('click', handleAudioToggle);\n\n  btns.append(restartBtn, saveBtn, resultsBtn, toggleAudio);\n\n  return btns;\n}\n\nfunction handleAudioToggle(e) {\n  e.target.classList.toggle('active');\n  isAudio = !isAudio;\n}\n\nfunction createStatsBar() {\n  const statsBar = document.createElement('div');\n  statsBar.className = 'stats';\n\n  statsBar.innerHTML = `\n    <div class=\"stats__moves\">\n      Moves: <span>0</span>\n    </div>\n\n    <div class=\"stats__time\">\n      Time: <span>0:0</span>\n    </div>\n  `;\n\n  let seconds = 0;\n\n  startInterval();\n\n  return statsBar;\n}\n\nfunction startInterval() {\n  let seconds = 0;\n  interval = setInterval(() => {\n    const time = document.querySelector('.stats__time span');\n    seconds++;\n    time.innerHTML = `${Math.floor(seconds / 60)}:${seconds % 60 < 10 ? '0' + seconds % 60 : seconds % 60}`;\n  }, 1000);\n}\n\nfunction stopInterval() {\n  clearInterval(interval);\n  interval = null;\n}\n\nfunction createField(cellsCount) {\n  cellSize = FIELD_WIDTH / Math.sqrt(cellsCount);\n  const field = document.createElement('div');\n  field.className = 'field';\n  field.style.width = FIELD_WIDTH + 'px';\n  field.style.height = FIELD_WIDTH + 'px';\n\n  for (let i = 1; i < cellsCount; i++) {\n    const position = {\n      left: i % Math.sqrt(cellsCount),\n      top: (i - (i % Math.sqrt(cellsCount))) / Math.sqrt(cellsCount),\n    };\n    const value = numbers[i];\n    const cell = createCell(i, value, cellSize, position, cellsCount);\n    field.append(cell);\n  }\n\n  return field;\n}\n\nfunction createCell(index, value, cellWSize, position, cellsCount) {\n  const cell = document.createElement('div');\n  cell.className = 'cell';\n\n  cell.style.width = cellWSize + 'px';\n  cell.style.height = cellWSize + 'px';\n  cell.style.left = position.left * cellWSize + 'px';\n  cell.style.top = position.top * cellWSize + 'px';\n\n  cells.push({\n    left: position.left,\n    top: position.top,\n    value,\n    elem: cell\n  });\n\n  cell.innerHTML = value;\n\n  cell.addEventListener('click', (e) => moveCell(index, cellsCount));\n\n  return cell;\n};\n\nfunction createDifficultyPanel(size) {\n  size = size ? Math.sqrt(size) + 'x' + Math.sqrt(size) : '4x4';\n\n  const difficulty = document.createElement('div');\n  difficulty.className = 'difficulty';\n\n  const difficultyCurrent = document.createElement('div');\n  difficultyCurrent.className = 'difficulty__current';\n  difficultyCurrent.innerHTML = `Frame size: ${size}`;\n\n  difficulty.append(difficultyCurrent);\n\n  const difficultyList = document.createElement('ul');\n  difficultyList.className = 'difficulty__list';\n\n  for (let i = 3; i < 9; i++) {\n    const difficultyItem = document.createElement('li');\n    difficultyItem.className = 'difficulty__item';\n\n    const difficultyLink = document.createElement('a');\n    difficultyLink.href = '#';\n    difficultyLink.className = 'difficulty__link';\n    difficultyLink.innerHTML = i + 'x' + i;\n\n    difficultyLink.addEventListener('click', handleSizeChange);\n\n    difficultyItem.append(difficultyLink);\n    difficultyList.append(difficultyItem);\n  }\n\n  const difficultyOther = document.createElement('div');\n  difficultyOther.className = 'difficulty__other';\n  difficultyOther.innerHTML = 'Other sizes: ';\n  difficultyOther.append(difficultyList);\n\n  difficulty.append(difficultyOther);\n\n  return difficulty;\n};\n\nfunction handleSizeChange(e) {\n  e.preventDefault();\n  const cellsCount = e.target.innerHTML.split('x')[0] ** 2;\n  startGame(cellsCount);\n}\n\nfunction moveCell(index, cellsCount) {\n  const cell = cells[index];\n  const leftDiff = Math.abs(emptyCell.left - cell.left),\n    topDiff = Math.abs(emptyCell.top - cell.top);\n\n  if (leftDiff + topDiff > 1) return;\n\n  document.querySelector('.stats__moves span').innerHTML++;\n\n  if (isAudio) CLICK_AUDIO.play();\n\n  cell.elem.style.left = emptyCell.left * cellSize + 'px';\n  cell.elem.style.top = emptyCell.top * cellSize + 'px';\n\n  const currentLeft = cell.left,\n    currentTop = cell.top;\n\n  cell.left = emptyCell.left;\n  cell.top = emptyCell.top;\n\n  emptyCell.left = currentLeft;\n  emptyCell.top = currentTop;\n\n  const isFinished = cells.every(cell => {\n    if (cell === emptyCell) return true;\n\n    return emptyCell.top === 0 && emptyCell.left === 0\n      ? cell.value === cell.top * Math.sqrt(cellsCount) + cell.left\n      : cell.value === (cell.top * Math.sqrt(cellsCount) + cell.left) + 1;\n  });\n\n  if (isFinished) {\n    const moves = document.querySelector('.stats__moves span').innerHTML,\n      time = document.querySelector('.stats__time span').innerHTML;\n    document.querySelector('.field').innerHTML = `Hooray! You solved the puzzle in ${time} and ${moves} moves!`;\n    saveResults(moves, time);\n  }\n}\n\nfunction saveResults(moves, time) {\n  const prevResults = localStorage.getItem('results');\n  const results = prevResults ? JSON.parse(prevResults) : [];\n  results.push({ moves, time });\n  localStorage.setItem('results', JSON.stringify(results.sort((a, b) => b.moves - a.moves)));\n}\n\nfunction startGame(cellsCount) {\n  numbers = [...new Array(cellsCount).keys()]\n    .map(x => x + 1)\n    .sort((a, b) => Math.random() - 0.5);\n  numbers.unshift(0);\n\n  document.body.innerHTML = '';\n  stopInterval();\n\n  emptyCell = {\n    top: 0,\n    left: 0,\n    value: 0\n  };\n\n  cells = [];\n  cells.push(emptyCell);\n\n  const btns = createBtns();\n  document.body.append(btns);\n\n  const statsBar = createStatsBar();\n  document.body.append(statsBar);\n\n  const field = createField(cellsCount);\n  document.body.append(field);\n\n  const diffuclity = createDifficultyPanel(cellsCount);\n  document.body.append(diffuclity);\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const cellsCount = localStorage.getItem('cellsCount') ?? 16;\n  startGame(cellsCount);\n});"]}